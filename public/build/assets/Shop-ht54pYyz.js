import{z as V,r as h,B as E,j as T,c as $,w as b,a as c,b as r,d as n,h as F,g as o,i as p,e as z,f as k,t as d,T as B,o as a,F as x,s as y,l as w,n as H}from"./app-Ct_mwAxD.js";import{S as A}from"./SiteLayout-DEC0OJpP.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"mx-auto max-w-7xl px-4 pt-[100px] pb-10"},P=["action"],U={class:"relative"},q=["value"],G={key:0,class:"absolute left-0 mt-1 w-full rounded-lg border border-gray-200 bg-white/95 shadow-lg dark:border-gray-700 dark:bg-gray-900/95 z-50"},W=["onClick"],J={class:"relative"},Q=["value"],X={key:0,class:"absolute left-0 mt-1 w-full rounded-lg border border-gray-200 bg-white/95 shadow-lg dark:border-gray-700 dark:bg-gray-900/95 z-50"},Y=["onClick"],Z={class:"flex items-center gap-3"},ee={class:"grid-cols-2 mt-6 grid gap-6 sm:grid-cols-3 lg:grid-cols-4"},te={class:"bg-gray-50 p-6"},re=["src","alt"],se={class:"p-4"},ae={class:"mt-1 text-sm text-gray-600 dark:text-offwhite"},oe={class:"mt-1 font-semibold"},ne={class:"pointer-events-none absolute left-3 top-3 z-20 space-y-1"},le={key:0,class:"rounded bg-indigo-600 px-2 py-0.5 text-[10px] font-medium text-white"},de={key:0,class:"col-span-full py-10 text-center text-gray-500"},ie={key:0,class:"mt-8 flex flex-wrap gap-2 font-body text-sm text-brown dark:text-cream"},ue={__name:"Shop",setup(ge){const m=V(),_=m.props.products?.data??[],S=m.props.products?.links??[],f=m.props.roots??[],C=m.props.filters??{root_id:"",sub_id:""},l=h(C.root_id??""),i=h(C.sub_id??"");E(l,()=>i.value="");const j=s=>f.find(t=>String(t.id)===String(s))?.children??[],D=T(()=>f.flatMap(s=>s.children??[])),L=T(()=>l.value?j(l.value):D.value),M=s=>{const t=s?.images?.[0]?.url;return t||`/theme/images/p${Number(s?.id)%8||1}.png`},R=s=>{const t=s?.category;return t?t?.parent?.name?`${t.parent.name} â†’ ${t.name}`:t.name:""},I=(s,t=14)=>{const e=s?.created_at?new Date(s.created_at):null;return!e||isNaN(e)?!1:(Date.now()-e.getTime())/864e5<=t},N=s=>route("product.show",s.slug??s.id),u=h(!1),g=h(!1);return document.addEventListener("click",()=>{u.value=!1,g.value=!1}),(s,t)=>(a(),$(A,null,{default:b(()=>[c(n(F),{title:"Shop"}),r("section",O,[t[8]||(t[8]=r("h1",{class:"mb-6 text-center text-2xl font-semibold text-brown dark:text-cream"},"Shop",-1)),r("form",{method:"GET",action:s.route("shop"),class:"grid gap-3 sm:grid-cols-3"},[r("div",U,[r("input",{type:"hidden",name:"root_id",value:l.value},null,8,q),r("button",{type:"button",onClick:t[0]||(t[0]=z(e=>u.value=!u.value,["stop"])),class:"flex w-full items-center justify-between rounded-lg border border-gray-300 bg-white/70 px-3 py-2 text-sm text-gray-800 shadow-sm backdrop-blur-md hover:bg-white/90 dark:bg-gray-900/60 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-900/80"},[k(d(l.value?n(f).find(e=>String(e.id)===String(l.value))?.name:"Semua Kategori Utama")+" ",1),t[4]||(t[4]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-gray-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"})],-1))]),c(B,{name:"fade"},{default:b(()=>[u.value?(a(),o("div",G,[r("div",{class:"cursor-pointer px-3 py-2 text-sm hover:bg-sage/20 dark:hover:bg-gray-700/40",onClick:t[1]||(t[1]=e=>{l.value="",u.value=!1})}," Semua Kategori Utama "),(a(!0),o(x,null,y(n(f),e=>(a(),o("div",{key:e.id,onClick:v=>{l.value=e.id,u.value=!1},class:"cursor-pointer px-3 py-2 text-sm hover:bg-sage/20 dark:hover:bg-gray-700/40"},d(e.name),9,W))),128))])):p("",!0)]),_:1})]),r("div",J,[r("input",{type:"hidden",name:"sub_id",value:i.value},null,8,Q),r("button",{type:"button",onClick:t[2]||(t[2]=z(e=>g.value=!g.value,["stop"])),class:"flex w-full items-center justify-between rounded-lg border border-gray-300 bg-white/70 px-3 py-2 text-sm text-gray-800 shadow-sm backdrop-blur-md hover:bg-white/90 dark:bg-gray-900/60 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-900/80"},[k(d(i.value?L.value.find(e=>String(e.id)===String(i.value))?.name:"Semua Subkategori")+" ",1),t[5]||(t[5]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-gray-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"})],-1))]),c(B,{name:"fade"},{default:b(()=>[g.value?(a(),o("div",X,[r("div",{class:"cursor-pointer px-3 py-2 text-sm hover:bg-sage/20 dark:hover:bg-gray-700/40",onClick:t[3]||(t[3]=e=>{i.value="",g.value=!1})}," Semua Subkategori "),(a(!0),o(x,null,y(L.value,e=>(a(),o("div",{key:e.id,onClick:v=>{i.value=e.id,g.value=!1},class:"cursor-pointer px-3 py-2 text-sm hover:bg-sage/20 dark:hover:bg-gray-700/40"},d(e.name),9,Y))),128))])):p("",!0)]),_:1})]),r("div",Z,[t[7]||(t[7]=r("button",{class:"rounded-md bg-sage dark:bg-brown px-4 py-2 text-white hover:bg-sage/40 dark:hover:bg-brown/40 font-body text-sm"}," Terapkan Filter ",-1)),c(n(w),{href:s.route("shop"),class:"text-sm text-gray-600 dark:text-offwhite hover:text-gray-900 dark:hover:text-cream font-body text-sm"},{default:b(()=>[...t[6]||(t[6]=[k(" Reset ",-1)])]),_:1},8,["href"])])],8,P),r("div",ee,[(a(!0),o(x,null,y(n(_),e=>(a(),o("div",{key:e.id,class:"relative overflow-hidden rounded-xl border border-sage/40 bg-cream/30 dark:bg-darkbrown/40 shadow-sm hover:shadow-md transition"},[c(n(w),{href:N(e),"aria-label":"Lihat detail produk",class:"absolute inset-0 z-10"},null,8,["href"]),r("div",te,[r("img",{src:M(e),alt:e.name,class:"aspect-square w-full object-contain bg-offwhite/70 dark:bg-gray-800"},null,8,re)]),r("div",se,[c(n(w),{href:N(e),class:"relative z-20 line-clamp-2 font-medium hover:underline"},{default:b(()=>[k(d(e.name),1)]),_:2},1032,["href"]),r("p",ae,d(R(e)),1),r("p",oe," Rp "+d((e.price||0).toLocaleString("id-ID")),1)]),r("div",ne,[I(e)?(a(),o("span",le,"NEW ARRIVAL")):p("",!0)])]))),128)),n(_).length?p("",!0):(a(),o("p",de," Tidak ada produk untuk filter ini. "))]),n(S)?.length?(a(),o("nav",ie,[(a(!0),o(x,null,y(n(S),(e,v)=>(a(),$(n(w),{key:v,href:e.url||"",class:H(["rounded border px-3 py-1.5",e.active?"bordersage bg-sage text-white":"bg-white dark:bg-darkbrown/40 hover:bg-gray-50"]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])):p("",!0)])]),_:1}))}},me=K(ue,[["__scopeId","data-v-407a8fbd"]]);export{me as default};
